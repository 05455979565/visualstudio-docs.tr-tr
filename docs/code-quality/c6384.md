---
title: C6384
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6384
helpviewer_keywords:
- C6384
ms.assetid: 9c605b61-1485-49a8-847b-41170193dbf4
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 837d31002f75995fc55d29045500e093bf1ca69c
ms.sourcegitcommit: 535ef05b1e553f0fc66082cd2e0998817eb2a56a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/07/2019
ms.locfileid: "72017421"
---
# <a name="c6384"></a>C6384
Uyarı C6384: başka bir değere göre sizeof bir işaretçiyi bölme

 Bu uyarı, bir boyut hesaplamasının yanlış olabileceğini gösterir. Bir dizideki öğelerin sayısını hesaplamak için, biri bazen dizinin boyutunu ilk öğenin boyutuna böler; Ancak, dizi aslında bir işaretçiyse, sonuç genellikle amaçtan farklıdır.

 İşaretçi bir işlev parametresi ise ve arabelleğin boyutu geçirilmemişse, kullanılabilir maksimum arabelleği hesaplamak mümkün değildir. İşaretçi yerel olarak atandığında, tahsisatın kullanıldığı boyut kullanılmalıdır.

## <a name="example"></a>Örnek
 Aşağıdaki kod bu uyarıyı oluşturur:

```
#include <windows.h>
#include <TCHAR.h>

#define SIZE 15

void f( )
{
  LPTSTR dest = new TCHAR[SIZE];
  char src [SIZE] = "Hello, World!!";
  if (dest)
  {
    _tcsncpy(dest, src, sizeof dest  / sizeof dest[0]);
  }
}
```

 Bu uyarıyı düzeltmek için aşağıdaki kodda gösterildiği gibi arabellek boyutunu geçirin:

```
#include <windows.h>
#include <TCHAR.h>

#define SIZE 15

void f( )
{
  LPTSTR dest = new TCHAR[SIZE];
  char src [SIZE] = "Hello, World!!";
  if (dest)
  {
    _tcsncpy(dest, src, SIZE);
  }
}
```

 Güvenli dize işlevi _tcsncpy_s kullanarak bu uyarıyı düzeltmek için aşağıdaki kodu kullanın:

```
void f( )
{
  LPTSTR dest = new TCHAR[SIZE];
  char src [SIZE] = "Hello, World!!";
  if (dest)
  {
   _tcsncpy_s(dest, SIZE, src, SIZE);
  }
}
```

 Yeni ve silmenin kullanılması, bellek sızıntıları ve özel durumlar açısından çok sayıda ekde olduğunu unutmayın. Bu tür sızıntıları ve özel durum sorunlarını tamamen önlemek için, C++ standart şablon KITAPLıĞı (STL) tarafından sunulan mekanizmaları kullanın. Bunlar şunlardır [shared_ptr](/cpp/standard-library/shared-ptr-class), [unique_ptr](/cpp/standard-library/unique-ptr-class)ve [Vector](/cpp/standard-library/vector). Daha fazla bilgi için bkz. [akıllı işaretçiler](/cpp/cpp/smart-pointers-modern-cpp) ve [ C++ standart kitaplık](/cpp/standard-library/cpp-standard-library-reference).

## <a name="see-also"></a>Ayrıca Bkz.

- [_mbsnbcpy_s, _mbsnbcpy_s_l](/cpp/c-runtime-library/reference/mbsnbcpy-s-mbsnbcpy-s-l)
- [sizeof İşleci](/cpp/cpp/sizeof-operator)