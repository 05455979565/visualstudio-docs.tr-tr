---
title: 'CA1021: Out parametrelerinden kaçının'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1021
- AvoidOutParameters
helpviewer_keywords:
- AvoidOutParameters
- CA1021
ms.assetid: 970f2304-842c-4fb7-9734-f3871da8d479
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 579b04f26af972ac025b0bfc07bc8dc9eb636d12
ms.sourcegitcommit: 98421670ed0b8170aaa32d3d6f8681298f401a1d
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/18/2020
ms.locfileid: "81638027"
---
# <a name="ca1021-avoid-out-parameters"></a>CA1021: Out parametrelerinden kaçının

|||
|-|-|
|TypeName|AvoidOutParameters|
|CheckId|CA1021|
|Kategori|Microsoft.Design|
|Son dakika değişikliği|Yeni|

## <a name="cause"></a>Nedeni
Ortak bir türdeki ortak veya `out` korumalı yöntemin bir parametresi vardır.

Varsayılan olarak, bu kural yalnızca dışarıdan görünen türlere bakar, ancak bu [yapılandırılabilir.](#configurability)

## <a name="rule-description"></a>Kural açıklaması
Türleri başvuruyla geçirme `out` `ref`(kullanma veya kullanma) işaretçilerle deneyim gerektirir, değer türlerinin ve başvuru türlerinin nasıl farklı olduğunu anlamak ve birden çok iade değerine sahip işleme yöntemlerini işleme gerektirir. Ayrıca, parametreler `out` ve `ref` arasındaki fark yaygın olarak anlaşılamamıştır.

Bir başvuru türü "başvuru tarafından" geçirildiğinde, yöntem nesnenin farklı bir örneğini döndürmek için parametreyi kullanmayı amaçlamaktadır. Başvuru türüne başvuru yla geçmek, çift işaretçi, işaretçi veya çift yönlendirme kullanma olarak da bilinir. "Değere göre" geçen varsayılan çağrı kuralını kullanarak, başvuru türünü alan bir parametre zaten nesneye bir işaretçi alır. İşaretçi, işaret ettiği nesne değil, değer e göre geçirilir. Değere göre geçiş, yöntemin işaretçiyi başvuru türünün yeni bir örneğine işaret etmek için değiştiremeyeceği anlamına gelir. Ancak, işaret ettiği nesnenin içeriğini değiştirebilirsiniz. Çoğu uygulama için bu yeterlidir ve istenilen davranışı verir.

Bir yöntemin farklı bir örnek döndürmesi gerekiyorsa, bunu gerçekleştirmek için yöntemin geri dönüş değerini kullanın. Dizeleri <xref:System.String?displayProperty=fullName> üzerinde çalışan ve dize yeni bir örnek döndürün çeşitli yöntemler için sınıfbakın. Bu model kullanıldığında, arayan kişi özgün nesnenin korunup korunmayacağına karar vermelidir.

İade değerleri olağan ve yoğun olarak kullanılmasına `out` `ref` rağmen, doğru uygulama ve parametreler ara tasarım ve kodlama becerileri gerektirir. Genel bir hedef kitle için tasarım yapan kitaplık `out` `ref` mimarları, kullanıcıların çalışma da veya parametrelerde ustalaşmalarını beklememelidir.

## <a name="how-to-fix-violations"></a>İhlalleri düzeltme
Değer türünden kaynaklanan bu kuralın ihlalini düzeltmek için, yöntemin nesneyi iade değeri olarak döndürmesini sorun. Yöntem in birden çok değer döndürmesi gerekiyorsa, değerleri tutan bir nesnenin tek bir örneğini döndürmek için yeniden tasarla.

Başvuru türünün neden olduğu bu kuralın ihlalini düzeltmek için, istenen davranışın başvurunun yeni bir örneğini döndürmek olduğundan emin olun. Bu ysa, yöntem bunu yapmak için iade değerini kullanmalıdır.

## <a name="when-to-suppress-warnings"></a>Uyarıları ne zaman bastırır
Bu kuraldan bir uyarıyı bastırmak güvenlidir. Ancak, bu tasarım kullanılabilirlik sorunlarına neden olabilir.

## <a name="configurability"></a>Konfigürasyon

Bu kuralı [FxCop çözümleyicilerinden](install-fxcop-analyzers.md) (eski çözümlemeyle değil) çalıştırıyorsanız, kod tabanınızın erişilebilirliklerine bağlı olarak bu kuralı hangi bölümlerde çalıştıracakşekilde yapılandırabilirsiniz. Örneğin, kuralın yalnızca genel olmayan API yüzeyine karşı çalışması gerektiğini belirtmek için, projenizdeki bir .editorconfig dosyasına aşağıdaki anahtar değer çiftini ekleyin:

```ini
dotnet_code_quality.ca1021.api_surface = private, internal
```

Bu seçeneği yalnızca bu kural, tüm kurallar veya bu kategorideki tüm kurallar (Tasarım) için yapılandırabilirsiniz. Daha fazla bilgi için Bkz. [Bkz.](configure-fxcop-analyzers.md)

## <a name="example"></a>Örnek
Aşağıdaki kitaplık, bir sınıfın bir kullanıcının geri bildirimine yanıt üreten iki uygulamasını gösterir. İlk uygulama`BadRefAndOut`( ) kitaplık kullanıcısını üç geri dönüş değerini yönetmeye zorlar. İkinci uygulama`RedesignedRefAndOut`( ) verileri tek bir birim olarak yöneten`ReplyData`bir kapsayıcı sınıfının örneğini döndürerek kullanıcı deneyimini kolaylaştırır.

[!code-csharp[FxCop.Design.NoRefOrOut#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_1.cs)]

## <a name="example"></a>Örnek
Aşağıdaki uygulama, kullanıcının deneyimini göstermektedir. Yeniden tasarlanan kitaplık (yöntem)`UseTheSimplifiedClass` için arama daha basittir ve yöntem tarafından döndürülen bilgiler kolayca yönetilir. İki yöntemden elde edilen çıktı aynıdır.

[!code-csharp[FxCop.Design.TestNoRefOrOut#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_2.cs)]

## <a name="example"></a>Örnek
Aşağıdaki örnek kitaplık, `ref` başvuru türleri için parametrelerin nasıl kullanıldığını gösterir ve bu işlevselliği uygulamak için daha iyi bir yol gösterir.

[!code-csharp[FxCop.Design.RefByRefNo#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_3.cs)]

## <a name="example"></a>Örnek
Aşağıdaki uygulama, davranışı göstermek için kitaplıktaki her yöntemi çağırır.

[!code-csharp[FxCop.Design.TestRefByRefNo#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_4.cs)]

Bu örnek, aşağıdaki çıktıyı üretir:

```txt
Changing pointer - passed by value:
12345
12345
Changing pointer - passed by reference:
12345
12345 ABCDE
Passing by return value:
12345 ABCDE
```

## <a name="try-pattern-methods"></a>Desen yöntemlerini deneyin

### <a name="description"></a>Açıklama
**Try\<Something>** modelini uygulayan yöntemler, örneğin <xref:System.Int32.TryParse%2A?displayProperty=fullName>, bu ihlali artırmaz. Aşağıdaki örnekte <xref:System.Int32.TryParse%2A?displayProperty=fullName> yöntemi uygulayan bir yapı (değer türü) gösterilmektedir.

### <a name="code"></a>Kod
[!code-csharp[FxCop.Design.TryPattern#1](../code-quality/codesnippet/CSharp/ca1021-avoid-out-parameters_5.cs)]

## <a name="related-rules"></a>İlgili kurallar
[CA1045: Türleri başvuruya göre geçirmeyin](../code-quality/ca1045.md)
